<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
BeyondAdmin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.2.0
Version: 1.0.0
Purchase: http://wrapbootstrap.com
-->

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<!-- Head -->
<head>
    <title>模块管理</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="description" content="data tables" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" href="${sys_cxt}/assets/img/favicon.png" type="image/x-icon"/>
 <link rel="stylesheet" href="${cxt }/front/css/button.css" />
    <link href="${sys_cxt}/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link id="bootstrap-rtl-link" href="" rel="stylesheet" />
    <link href="${sys_cxt}/assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="${sys_cxt}/assets/css/weather-icons.min.css" rel="stylesheet" />
    <!--Fonts-->
    <!--<link href="http://fonts.useso.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300" rel="stylesheet" type="text/css">-->
    <!--Beyond styles-->
    <link rel="stylesheet" href="${sys_cxt}/assets/css/beyond.min.css" />
    <link href="${sys_cxt}/assets/css/demo.min.css" rel="stylesheet" />
    <link href="${sys_cxt}/assets/css/typicons.min.css" rel="stylesheet" />
    <link href="${sys_cxt}/assets/css/animate.min.css" rel="stylesheet" />
    <link id="skin-link" href="" rel="stylesheet" type="text/css" />
    <!--Page Related styles-->
    <link href="${sys_cxt}/assets/css/dataTables.bootstrap.css" rel="stylesheet" />	
    <!--Skin Script: Place this script in head to load scripts for skins and rtl support-->
    <script src="${sys_cxt}/assets/js/jquery-2.0.3.min.js"></script>
    <script src="${sys_cxt}/assets/js/skins.min.js"></script>
    <link href="${sys_cxt}/css/head.css" rel="stylesheet" type="text/css" />
	<link href="${sys_cxt}/css/custom.css" rel="stylesheet" type="text/css"/>
	
	<link rel="stylesheet" href="${sys_cxt}/css/global.css" media="all" />
	<link rel="stylesheet" type="text/css" href="${cxt}/hlib/layui/css/layui.css" />
	<script type="text/javascript" src="${cxt }/hlib/layui/layui.js" charset="utf-8"></script>
<style>
.header-right{
  	width:75%;
  	height:41px;
  	background-color: #667add;
  	color:#fff;
    float: left;
}
.header-right dl{
	float: left;
	color:#fff;
	padding: 0px 0px 0px 0px;
}
.header-right dl dt{
	padding: 12px 40px 0px 2px;
	font-size: 14px;
	font-family: "微软雅黑";
    color:#fff;
}
.header-right dl dt a{
   color:#fff; 
}
.header-right dl dt:hover {
   color: #2dc3e8;
}
.page-header .header-buttons a {
  height: 35px;
}
.page-header {
  height: 37px;
}
.page-header .header-title h1 {
           line-height: 17px;
         }
button{
	border: 0px;
	margin:auto auto 10px 10px;
}
.titl{
font-size: 1.4rem;
line-height: 35px;
}
#form th{
font-size: 1.2rem;
}
#form td{
font-size: 1rem;
}
#form blockquote{
color: #23527C;
}
/*a:link {color:white}
      a:visited {color: #00FF00}
   a:hover {color: #FF00FF}
   a:active {color: #0000FF}*/
</style>
</head>
<!-- /Head -->
<!-- Body -->
<body>
    <!-- Page Header -->
    <div class="page-header position-relative">
        <div class="header-title">
            <span class="titl">
                   网站管理                        
                <span>
                    <i class="fa fa-angle-right"></i>
                                           图片列表
                </span>
            </span>
        </div>
        <!--Header Buttons-->
        <div class="header-buttons">
           <!--  <a class="sidebar-toggler" href="#">
                <i class="fa fa-arrows-h"></i>
            </a>
            <a class="refresh" id="refresh-toggler" href="">
                <i class="glyphicon glyphicon-refresh"></i>
            </a>
            <a class="fullscreen" id="fullscreen-toggler" href="#">
                <i class="glyphicon glyphicon-fullscreen"></i>
            </a> -->
        </div>
        <!--Header Buttons End-->
    </div>
    <!-- /Page Header -->
    <!-- Page Body -->
    <div class="page-body">
        <div class="row">
            <div class="col-xs-12 col-md-12">
                <div class="widget">
                    <div class="widget-header ">
                      <!--  <span class="widget-caption">Simple DataTable</span>-->
                        <!-- <div class="widget-buttons">
                            <a href="#" data-toggle="maximize">
                                <i class="fa fa-expand"></i>
                            </a>
                            <a href="#" data-toggle="collapse">
                                <i class="fa fa-minus"></i>
                            </a>
                            <a href="#" data-toggle="dispose">
                                <i class="fa fa-times"></i>
                            </a>
                        </div> -->
                    </div>
                    <div class="widget-body" style="overflow-x:hidden;">
             			<!-- <div id="horizontal-form">
                            <form class="form-horizontal" role="form" id="fhgzwform" name="fhgzwform" method="post">
                                 <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-1 control-label no-padding-right"> </label>
                                    <div class="col-sm-2">
                                          <button type="button" class="btn btn-success" onclick="selsub('0','${path!}','fhgzwform');"><i class="fa fa-search"></i>查询</button>
                                    </div>
                                    <label class="col-sm-1 control-label no-padding-right"> </label>
                                    <div class="col-sm-2">
	                                    <a type="button" class="btn btn-info" href="${sys_cxt }/article/article">
											<i class="fa fa-plus"></i>新增	
								   		</a> 
                                    </div>
                                    <label class="col-sm-1 control-label no-padding-right"> </label>
                                    <div class="col-sm-2">
                                       <button type="reset" class="btn btn-danger"  onclick="delBatch()"><i class="fa  fa-undo"></i>刪除</button>
                                    </div>
                                    <label class="col-sm-1 control-label no-padding-right"> </label>
                                    <div class="col-sm-2">
                                    	<button type="submit" class="btn btn-primary" onclick="selsub('1','${path!}','fhgzwform');"><i class="fa fa-plus"></i>导出</button>
                                    </div>
                                </div>
                            </form>
                        </div> -->
	                    <div class="portlet box" style="margin-top:0px;">
							<div class="portlet-body">
								<div class="responsive">
									<div class="admin-main">
										<blockquote class="layui-elem-quote"
											style="margin-bottom:5px;padding:5px;border:0;">
											<a href="toAddCarousel">
												<button type="button"
													class="button button-raised button-primary button-box button-small">
													<i class="layui-icon">&#xe608;</i> 新增
												</button>
											</a> <a href="#" onclick="delBatch()">
												<button type="button"
													class="button button-raised button-caution button-box button-small">
													<i class="layui-icon">&#xe640;</i> 删除
												</button>
											</a>
											<!-- <div style="float:right; margin-top: 4px;">
												<div class="input-text radius size-S size-WSmaill"
													style="margin-left:0px; height:32px; float:left;">
													<input type="text" class="layui-input" placeholder="请输入关键字"
														id="queryText" value="${queryText !}"
														style="margin-left:0px; height:30px;" />
												</div>
												<button class="layui-btn layui-btn-sm" onclick="search();">
													<i class="layui-icon">&#xe615;</i> 搜索
												</button>
											</div> -->
											<div style="clear:right;"></div>
										</blockquote>
									</div>
								</div>
								<div class="layui-field-box">
									<div>
									<form id="form">
										<table class="table table-striped table-bordered table-hover" id="commontable">
											<colgroup>
												<col width="20" />
												<col width="100" />
												<col width="100" />
												<col width="100" />
												<col width="300" />
											</colgroup>
											<thead>
												<tr>
													<th><input type="checkbox" id="chk_all" name="all"
														onclick="check_all()" /></th>
													<th align="center" style="font-weight: bold;">图片名称</th>
													<th align="center" style="font-weight: bold;">图片类别</th>
													<th align="center" style="font-weight: bold;">显示状态</th>
													<th align="center" style="font-weight: bold;">操作</th>
												</tr>
											</thead>
											<tbody>
												<%for (carousel in carousels!) { %>
												<tr>
													<td><input type="checkbox" name="carouselId"
														value="${carousel.carousel_id}" /></td>
													<td>${carousel.carousel_name }</td>
													<td>
													<%if (carousel.product_manage_id! == 0) { %>
														首页轮播图
													<%}else if (carousel.product_manage_id! == 1) {%>
														新闻动态轮播图
													<%}else if (carousel.product_manage_id! == 2) {%>
														集团新闻图
													<%}%>
													</td>
													<td>
														<a href="carouselEdit?carouselId=${carousel.carousel_id }" class="">
															<i class="layui-icon">&#xe642;</i> 编辑
														</a>&nbsp;&nbsp;
														<%if (carousel.product_manage_id! == 0) { %>
															<a href="javascript:carouselUpper(${carousel.carousel_id })" class="">
																<i class="layui-icon">&#xe62f;</i> 启用
															</a>&nbsp;&nbsp;
															<a href="javascript:carouselUnder(${carousel.carousel_id })" class="">
																<i class="layui-icon">&#xe601;</i> 弃用
															</a>&nbsp;&nbsp;
														<%}else{%>
															<a href="javascript:imageUpper(${carousel.carousel_id })" class="">
																<i class="layui-icon">&#xe62f;</i> 启用
															</a>&nbsp;&nbsp;
														<%}%>
													</td>
												</tr>
												<%}%>
											</tbody>
										</table>
										<!-- <div id="pager"></div> -->
									</form>
									</div>
								</div>
							</div>
						</div>
                  	</div>
              </div>
          </div>
      </div>
  </div>
  <!-- /Page Body -->

    <!--Basic Scripts-->
    <script src="${sys_cxt}/assets/js/bootstrap.min.js"></script>

    <!--Beyond Scripts-->
    <script src="${sys_cxt}/assets/js/beyond.min.js"></script>

    <!--Page Related Scripts-->
    <script src="${sys_cxt}/assets/js/datatable/jquery.dataTables.min.js"></script>
    <script src="${sys_cxt}/assets/js/datatable/ZeroClipboard.js"></script>
    <script src="${sys_cxt}/assets/js/datatable/dataTables.tableTools.min.js"></script>
    <script src="${sys_cxt}/assets/js/datatable/dataTables.bootstrap.min.js"></script>
    <script src="${sys_cxt}/website/carousel/js/table.js"></script>
    <script src="${sys_cxt}/assets/js/datatable/datatables-init.js"></script>
    <script>
        InitiateSimpleDataTable.init();
        InitiateEditableDataTable.init();
        InitiateExpandableDataTable.init();
        InitiateCommonDataTable.init(10);
    </script>
    <script>
    var laypage, layer, element;
	layui.use([ 'element', 'laypage', 'layer' ],function() {
		laypage = layui.laypage; 
		layer = layui.layer;
		element = layui.element;

		var num = ${totalPage};
		var totalRow = ${totalRow};
		//调用分页
		laypage.render({
			elem : 'pager',
			count : totalRow, //数据总数，从服务端得到
			limit : 10,
			groups : 10,
			prev : '上一页',
			next : '下一页',
			first : '首页',
			last : '尾页',
			layout : [ 'count', 'prev', 'page', 'next',
					'skip' ],
			jump : function(obj, first) {
				var currentPage = obj.curr;//获取点击的页码   
				//layer.msg(obj.curr);
				if (first != true) {//是否首次进入页面  
					window.location.href = "getCarousels?pageNumber=" + currentPage;
				};
			},
			curr : function() { //通过url获取当前页，也可以同上（pages）方式获取  
				var page = location.search.match(/pageNumber=(\d+)/);
				return page ? page[1] : 1;
			}()
		});
	});
	//全选
	function check_all() {
		$("input[name='carouselId']").prop("checked", $("#chk_all").prop("checked"));
	}
	//批量删除
	function delBatch() {
		if ($("input[name='carouselId']:checked").length < 1) {
			alert('请选择');
			return;
		}
		if (confirm('确定删除吗？')) {
			$.ajax({
				cache : true,
				type : "POST",
				url : "delBatch",
				data : $('#form').serialize(),
				async : false,
				error : function(request) {
					alert("连接错误");
				},
				success : function(data) {
					$("#commontable").DataTable().ajax.reload();
					//window.location.reload();//href = "roleList";
				}
			});
		};
	};
	//使用图片
	function imageUpper(carouselId){
		$.ajax({
			cache : true,
			type : "POST",
			url : "imageUpper",
			data : {carouselId:carouselId},
			async : false,
			error : function(request) {
				alert("连接错误");
			},
			success : function(data) {
				if(data.error == 1){
					alert(data.msg);
				}else{
					window.location.reload();//href = "roleList";
				}
			}
		});
	}
	//启用轮播图
	function carouselUpper(carouselId){
		$.ajax({
			cache : true,
			type : "POST",
			url : "carouselUpper",
			data : {carouselId:carouselId},
			async : false,
			error : function(request) {
				alert("连接错误");
			},
			success : function(data) {
				if(data.error == 1){
					alert(data.msg);
				}else{
					window.location.reload();//href = "roleList";
				}
			}
		});
	}
	//弃用轮播图
	function carouselUnder(carouselId){
		$.ajax({
			cache : true,
			type : "POST",
			url : "carouselUnder",
			data : {carouselId:carouselId},
			async : false,
			error : function(request) {
				alert("连接错误");
			},
			success : function(data) {
				if(data.error == 1){
					alert(data.msg);
				}else{
					window.location.reload();//href = "roleList";
				}
			}
		});
	}
    </script>
</body>
</html>
